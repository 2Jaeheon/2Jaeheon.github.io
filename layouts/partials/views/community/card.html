{{ $item := .item }}
{{ $link := $item.RelPermalink }}
{{ $target := "" }}

{{ if $item.Params.external_link }}
  {{ $link = $item.Params.external_link }}
  {{ $target = "target=\"_blank\" rel=\"noopener\"" }}
{{ end }}

<div class="compact-card" style="display: flex; align-items: center; border: 1px solid #e0e0e0; border-radius: 8px; padding: 10px; margin-bottom: 15px; max-width: 400px;">
  {{ $resource := partial "blox-core/functions/get_featured_image.html" $item }}
  {{ with $resource }}
  {{ $image := .Resize "80x80" }}
  <a href="{{ $link }}" {{ $target | safeHTMLAttr }} style="margin-right: 15px;">
    <img src="{{ $image.RelPermalink }}" alt="{{ $item.Title }}" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover;" loading="lazy">
  </a>
  {{ end }}

  <div class="compact-card-content" style="flex: 1;">
    <h4 class="compact-card-title" style="font-size: 1rem; margin: 0;">
      <a href="{{ $link }}" {{ $target | safeHTMLAttr }} style="text-decoration: none; color: #333;">{{ $item.Title | markdownify | emojify }}</a>
    </h4>

    {{ if $item.Params.summary }}
    <p class="compact-card-summary" style="font-size: 0.85rem; color: #666; margin-top: 5px;">
      {{ $item.Params.summary | markdownify | emojify | truncate 80 }}
    </p>
    {{ end }}
  </div>
</div>